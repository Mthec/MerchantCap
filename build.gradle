plugins {
    id 'java'
    id 'idea'
}

version = '0.5-beta'

sourceCompatibility = 1.8
def $shortName = 'merchantcap'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation project(':WurmTestingHelper')
    implementation fileTree(dir: 'E:/Steam/steamapps/common/Wurm Unlimited/WurmServerLauncher/', includes: ["modlauncher.jar", "javassist.jar", "server.jar"])
    implementation project(':BMLBuilder')
}

jar {
    doLast {
        copy {
            from jar
            into 'E:/Steam/steamapps/common/Wurm Unlimited/WurmServerLauncher/mods/' + $shortName
        }
        copy {
            from 'src/main/resources/' + $shortName + '.properties'
            into 'E:/Steam/steamapps/common/Wurm Unlimited/WurmServerLauncher/mods/'
        }
    }

    includeEmptyDirs false
    archiveName $shortName + '.jar'

    manifest {
        attributes('Implementation-Version': version)
    }
}

task zip(type: Zip) {
    into($shortName) {
        from jar
    }
    from 'src/main/resources/' + $shortName + '.properties'

    archiveName = $shortName + '.zip'
}